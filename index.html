<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/js/foundation.min.js"></script>

<script type="text/javascript" src='js/jquery.tablesorter.js'></script>

<script src="js/jquery.csv-0.71.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/explorer.css">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css">
 <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
</head>

<script type="text/javascript">
  
  function process(data){
    var args = data;
    console.log("processing raw data");
    var split = data.split("\n");
    output = {};
    for (var i = 1; i < split.length; i++) {
      var items = split[i].split("\t");
      var item;
      item['organization'] = items[0];
      item['unit'] = items[1]
      item['name'] = items[2]
      item['job'] = items[6]
      item['rate'] = items[7]
      output[i-1] = item;
    }
    console.log("processed raw data");
    window.data = output;
  }

  $.ajax({
    type: "GET",
    url: "https://s3-us-west-2.amazonaws.com/lensnola/salaryexplorer/data/gss_tabs.csv.gz",
    dataType: "text",
    success: function(data) {process(data)}
  });

</script>


<script type="text/javascript" src='js/salaryexplorer.js'></script>

<div class="row">
  <div class="small-12 medium-12 columns">
    <div class="small-12 columns">
      <input id="input_box" type="text" name="namesearch" placeholder="Search by last name or title">
    </div>
    <div class="row">
      <div class="small-12 medium-12 columns" id="search-examples">Example: Jindal or warden</div>
    </div>

    <div class="ui-widget">
      <label for="tags">Department (Example: Municipal Court): </label>
      <input id="departments"  class = "large-12 medium-12 small-12 columns">
    </div>

    <div class="ui-widget">
      <label>Position (Example: Police Officer 1)</label>
      <input id="positions" class = "large-12 medium-12 small-12 columns">
    </div>

    <div class="large-2 medium-3 small-12 columns">
      <button id="search_button" class="button postfix searchButton">Search</button>
    </div>

  </div>
</div>

<div id="loading_gif_row" class="row">
    <div id="gif_holder" class="small-12 medium-12 large-12 columns centered">
        <img id="loading_gif" src='https://s3-us-west-2.amazonaws.com/lensnola/salaryexplorer/images/ajax-loader.gif'</img>
    </div>
</div>

<div id="results" class="row">
  <table id="myTable" class="tablesorter">
  <thead id="thead">
    <tr>
      <th width="20%">First</th>
      <th width="20%">Last</th>
      <th width="20%">Department</th>
      <th width="20%">Position</th>
      <th width="20%">Salary</th>
    </tr>
  </thead>
  <div id="tbody_div">
  <tbody id="tbody">
    
  </tbody>
  </div>
  </table>
</div>

<script>
  Foundation.global.namespace = '';
  $(document).foundation();
</script>